import{d as le,c as _,a as x,b as e,e as Ie,t as i,f as S,o as y,r as d,g as oe,h as U,i as Le,j as Ee,w as ae,k as se,l as m,v as E,m as w,F as re,n as ne,p as F,q as H,T as Ke,s as Re}from"./app-DnQTBHZy.js";import{_ as Ue}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C5LkTz5F.js";import{S as h}from"./sweetalert2.esm.all-NNS-RXd7.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Fe=()=>{const g={customClass:{popup:"rounded-2xl shadow-2xl",title:"text-gray-900 font-semibold text-lg",content:"text-gray-600 text-sm",confirmButton:"bg-gradient-to-r from-rose-500 to-pink-500 text-white px-6 py-2 rounded-xl hover:from-rose-600 hover:to-pink-600 transition-all font-medium",cancelButton:"bg-gray-100 text-gray-700 px-6 py-2 rounded-xl hover:bg-gray-200 transition-all font-medium mr-3",denyButton:"bg-red-100 text-red-700 px-6 py-2 rounded-xl hover:bg-red-200 transition-all font-medium mr-3"},buttonsStyling:!1,showClass:{popup:"animate__animated animate__fadeInDown animate__faster"},hideClass:{popup:"animate__animated animate__fadeOutUp animate__faster"}};return{showSuccess:(n,c,f)=>h.fire({...g,icon:"success",title:n,text:f?void 0:c,html:f||void 0,iconColor:"#10b981",timer:f?5e3:3e3,timerProgressBar:!0,showConfirmButton:!!f,confirmButtonText:"Tutup"}),showError:(n,c)=>h.fire({...g,icon:"error",title:n,text:c,iconColor:"#ef4444",confirmButtonText:"Tutup"}),showWarning:(n,c)=>h.fire({...g,icon:"warning",title:n,text:c,iconColor:"#f59e0b",confirmButtonText:"OK"}),showInfo:(n,c)=>h.fire({...g,icon:"info",title:n,text:c,iconColor:"#3b82f6",confirmButtonText:"OK"}),showConfirmation:(n,c,f="Ya, Lanjutkan",B="Batal")=>h.fire({...g,icon:"question",title:n,text:c,iconColor:"#6366f1",showCancelButton:!0,confirmButtonText:f,cancelButtonText:B,reverseButtons:!0}),showDeleteConfirmation:(n,c)=>h.fire({...g,icon:"warning",title:n,text:c,iconColor:"#ef4444",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",reverseButtons:!0,customClass:{...g.customClass,confirmButton:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-2 rounded-xl hover:from-red-600 hover:to-red-700 transition-all font-medium"}}),showLoading:(n,c)=>h.fire({...g,title:n,text:c,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{h.showLoading()}}),showToast:(n,c="success")=>h.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-xl shadow-lg",title:"text-sm font-medium"},didOpen:B=>{B.addEventListener("mouseenter",h.stopTimer),B.addEventListener("mouseleave",h.resumeTimer)}}).fire({icon:c,title:n,iconColor:{success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"}[c]}),close:()=>{h.close()}}},He={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},ze={class:"flex items-center justify-center min-h-screen px-4"},Oe={class:"relative bg-white rounded-3xl shadow-2xl max-w-md w-full mx-auto transform transition-all animate-bounce-in"},Je={class:"p-6 space-y-4"},qe={class:"space-y-3"},We={class:"flex items-center p-3 bg-pink-50 rounded-xl border border-pink-100"},Ye={class:"ml-3 flex-1"},Ge={class:"text-lg font-bold text-gray-800"},Xe={class:"flex items-center p-3 bg-rose-50 rounded-xl border border-rose-100"},Qe={class:"ml-3 flex-1"},Ze={class:"text-lg font-bold text-gray-800"},et={class:"flex items-center p-3 bg-pink-50 rounded-xl border border-pink-100"},tt={class:"ml-3 flex-1"},ot={class:"text-lg font-bold text-gray-800"},at={class:"flex items-start p-3 bg-rose-50 rounded-xl border border-rose-100"},st={class:"ml-3 flex-1"},rt={class:"text-base font-semibold text-gray-800 leading-relaxed"},nt=le({__name:"RegistrationSuccessModal",props:{isVisible:{type:Boolean},patientData:{}},emits:["close","ok"],setup(g,{emit:D}){const C=D,V=()=>{C("ok"),C("close")};return(A,r)=>g.isVisible?(y(),_("div",He,[e("div",ze,[r[11]||(r[11]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity"},null,-1)),e("div",Oe,[r[10]||(r[10]=Ie('<div class="relative bg-gradient-to-br from-pink-50 via-rose-50 to-pink-100 rounded-t-3xl p-6 text-center" data-v-330f635a><div class="absolute top-0 left-0 w-full h-full overflow-hidden rounded-t-3xl" data-v-330f635a><div class="absolute -top-4 -left-4 w-16 h-16 bg-pink-200 rounded-full opacity-30" data-v-330f635a></div><div class="absolute -top-2 -right-6 w-12 h-12 bg-rose-200 rounded-full opacity-40" data-v-330f635a></div><div class="absolute top-8 right-4 w-8 h-8 bg-pink-300 rounded-full opacity-20" data-v-330f635a></div></div><div class="relative z-10 mb-4" data-v-330f635a><div class="mx-auto w-20 h-20 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full flex items-center justify-center shadow-lg" data-v-330f635a><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-330f635a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" data-v-330f635a></path></svg></div></div><h2 class="text-2xl font-bold text-gray-800 mb-2" data-v-330f635a>Registrasi Berhasil!</h2><div class="w-16 h-1 bg-gradient-to-r from-pink-400 to-rose-500 rounded-full mx-auto" data-v-330f635a></div></div>',1)),e("div",Je,[e("div",qe,[e("div",We,[r[1]||(r[1]=e("div",{class:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-pink-400 to-rose-500 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Ye,[r[0]||(r[0]=e("p",{class:"text-sm font-medium text-gray-600"},"No. Rekam Medis",-1)),e("p",Ge,i(g.patientData?.no_rkm_medis||"N/A"),1)])]),e("div",Xe,[r[3]||(r[3]=e("div",{class:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-rose-400 to-pink-500 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",Qe,[r[2]||(r[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Nama Lengkap",-1)),e("p",Ze,i(g.patientData?.nama||"N/A"),1)])]),e("div",et,[r[5]||(r[5]=e("div",{class:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-pink-400 to-rose-500 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),e("div",tt,[r[4]||(r[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Nomor Telepon",-1)),e("p",ot,i(g.patientData?.no_telp||"N/A"),1)])]),e("div",at,[r[7]||(r[7]=e("div",{class:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-rose-400 to-pink-500 rounded-lg flex items-center justify-center mt-1"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("div",st,[r[6]||(r[6]=e("p",{class:"text-sm font-medium text-gray-600"},"Alamat",-1)),e("p",rt,i(g.patientData?.alamat||"N/A"),1)])])]),r[8]||(r[8]=e("div",{class:"text-center py-4"},[e("p",{class:"text-gray-600 text-sm leading-relaxed"},[S(" Pasien telah berhasil didaftarkan ke sistem SIMRS. "),e("br"),S("Data dapat digunakan untuk keperluan medis selanjutnya. ")])],-1))]),e("div",{class:"p-6 pt-0"},[e("button",{onClick:V,class:"w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-semibold py-4 px-6 rounded-2xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-pink-300 focus:ring-opacity-50"},[...r[9]||(r[9]=[e("span",{class:"flex items-center justify-center"},[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),S(" OK ")],-1)])])])])])])):x("",!0)}}),lt=ie(nt,[["__scopeId","data-v-330f635a"]]),it={class:"w-full"},dt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4"},ut={class:"mt-4 sm:mt-0 flex space-x-3"},ct={key:0,class:"bg-white rounded-2xl p-6 shadow-sm border border-rose-100 mb-4"},pt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mt={class:"bg-white rounded-2xl shadow-sm border border-rose-100 overflow-hidden"},gt={class:"px-6 py-4 border-b border-rose-100"},ft={class:"flex items-center justify-between"},vt={class:"flex items-center space-x-4"},xt={class:"relative"},bt={class:"overflow-x-auto"},kt={class:"w-full"},ht={class:"bg-white divide-y divide-gray-200"},yt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm text-gray-900"},_t={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"flex items-center"},Nt={class:"ml-0"},St={class:"text-sm font-medium text-gray-900"},Ct={class:"text-sm text-gray-500"},Vt={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"text-sm text-gray-900"},Dt={class:"text-sm text-gray-600"},jt={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm text-gray-900"},At={class:"px-6 py-4 whitespace-nowrap"},$t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Pt={class:"relative"},It=["onClick"],Lt={class:"px-5 py-4 bg-gradient-to-r from-rose-50/80 to-pink-50/80 border-b border-gray-200/30"},Et={class:"flex items-center justify-between"},Kt={class:"flex items-center space-x-3"},Rt={class:"text-sm font-semibold text-gray-800"},Ut={class:"text-xs text-gray-600 mt-0.5"},Ft={class:"py-3"},Ht={class:"px-5 py-3"},zt={class:"space-y-2"},Ot=["href"],Jt=["href"],qt={class:"px-5 py-3"},Wt={class:"space-y-2"},Yt=["onClick"],Gt=["onClick","disabled"],Xt=["onClick","disabled"],Qt=["onClick","disabled"],Zt={class:"px-6 py-4 border-t border-rose-100"},eo={class:"flex items-center justify-between"},to={class:"text-sm text-gray-500"},oo={class:"flex space-x-2"},ao=["disabled"],so=["onClick"],ro=["disabled"],no={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},lo={class:"flex items-center justify-center min-h-screen px-4"},io={class:"bg-white rounded-2xl p-6 w-full max-w-md relative"},uo={class:"text-lg font-semibold text-gray-900 mb-4"},co={class:"flex justify-end space-x-3 pt-4"},po={type:"submit",class:"bg-gradient-to-r from-rose-500 to-pink-500 text-white px-6 py-2 rounded-xl hover:from-rose-600 hover:to-pink-600 transition-all"},mo={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},go={class:"flex items-center justify-center min-h-screen px-4"},fo={class:"bg-white rounded-2xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto"},vo={class:"bg-rose-50 rounded-xl p-4 mb-6"},xo={class:"grid grid-cols-2 gap-4 text-sm"},bo={class:"text-gray-900 font-medium ml-2"},ko={class:"text-gray-900 font-medium ml-2"},ho={class:"text-gray-900 font-medium ml-2"},yo={class:"text-gray-900 font-medium ml-2"};const wo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"};const _o={class:"flex justify-end space-x-3 pt-6 border-t"},Bo=["disabled"],No={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},So=le({__name:"Bookings",props:{bookings:{}},setup(g){const D=g,C=d(!1),V=d(!1),A=d(!1),r=d(!1),K=d({no_rkm_medis:"",nama:"",no_telp:"",alamat:""}),$=d(null),u=d(null),P=d(""),n=d(D.bookings.current_page),c=d(D.bookings.per_page),f=d(!1),B=d(!1),R=d(!1),I=d(null),b=d(D.bookings),L=d(""),Y=d(!1),Co=d(""),Vo=d("");let z=null;const{showSuccess:G,showError:j,showWarning:de,showConfirmation:X,showToast:T}=Fe();oe(()=>{console.log("Bookings component mounted")});const k=d({status:"",startDate:"",endDate:"",doctor:""}),v=d({patient_name:"",patient_phone:"",appointment_datetime:"",doctor:"",status:"Belum Dibalas",notes:""}),l=d({nm_pasien:"",tmp_lahir:"",tgl_lahir:"",jk:"L",nm_ibu:"",gol_darah:"-",pekerjaan:"",stts_nikah:"BELUM MENIKAH",agama:"ISLAM",pnd:"-",alamat:"",keluarga:"AYAH",namakeluarga:""}),ue=a=>{u.value=a,l.value={nm_pasien:a.nama||"",tmp_lahir:"",tgl_lahir:"",jk:"L",nm_ibu:"",gol_darah:"-",pekerjaan:"",stts_nikah:"BELUM MENIKAH",agama:"ISLAM",pnd:"-",alamat:a.alamat||"",keluarga:"AYAH",namakeluarga:""},Ve(),Ce(),A.value=!0},O=()=>{A.value=!1,u.value=null,l.value={nm_pasien:"",tmp_lahir:"",tgl_lahir:"",jk:"L",nm_ibu:"",gol_darah:"-",pekerjaan:"",stts_nikah:"BELUM MENIKAH",agama:"ISLAM",pnd:"-",alamat:"",keluarga:"AYAH",namakeluarga:""}},ce=()=>{r.value=!1,ve()},pe=async()=>{if(!(f.value||!u.value))try{f.value=!0;const a=await fetch(`/api/booking/register-patient/${u.value.no_booking}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(l.value)}),t=await a.json();if(a.ok){if(console.log("Registration API Response:",t),t.success===!1&&t.patient){de("Pasien Sudah Terdaftar",`Pasien ${u.value.nama} sudah terdaftar di SIMRS dengan No. RM: ${t.patient.no_rkm_medis}`);const o=b.value.data.findIndex(s=>s.no_booking===u.value.no_booking);o!==-1&&(b.value.data[o].status="Terdaftar")}else if(t.success===!0&&t.patient){console.log("Setting up success modal with patient data:",t.patient);const o=b.value.data.findIndex(s=>s.no_booking===u.value.no_booking);o!==-1&&(b.value.data[o].status="Terdaftar"),K.value={no_rkm_medis:t.patient.no_rkm_medis,nama:t.patient.nama,no_telp:t.patient.no_tlp||u.value.no_telp,alamat:t.patient.alamat},console.log("Success patient data set:",K.value),r.value=!0,console.log("showSuccessModal set to:",r.value)}O()}else j("Gagal Mendaftarkan Pasien",t.message||"Terjadi kesalahan saat mendaftarkan pasien")}catch(a){console.error("Error registering patient:",a),j("Kesalahan Sistem","Terjadi kesalahan saat mendaftarkan pasien. Silakan coba lagi.")}finally{f.value=!1}},J=()=>{V.value=!1,u.value=null,l.value={nm_pasien:"",tmp_lahir:"",tgl_lahir:"",jk:"L",nm_ibu:"",gol_darah:"-",pekerjaan:"",stts_nikah:"BELUM MENIKAH",agama:"ISLAM",pnd:"-",alamat:"",keluarga:"AYAH",namakeluarga:""}},me=U(()=>{let a=b.value.data;return P.value&&(a=a.filter(t=>t.nama.toLowerCase().includes(P.value.toLowerCase()))),k.value.status&&(a=a.filter(t=>t.status===k.value.status)),a}),Q=U(()=>b.value.total),q=U(()=>b.value.last_page),ge=U(()=>{const a=[],t=Math.max(1,n.value-2),o=Math.min(q.value,n.value+2);for(let s=t;s<=o;s++)a.push(s);return a}),fe=a=>{I.value=I.value===a?null:a},M=()=>{I.value=null},ve=async()=>{try{const a=await fetch(`/admin/bookings?page=${n.value}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(a.ok){const t=await a.json();t.props&&t.props.bookings&&(b.value=t.props.bookings)}}catch(a){console.error("Error refreshing bookings:",a)}},Z=a=>{if(!a||typeof a!="string")return{date:"Tanggal tidak tersedia",time:"—"};const o=a.replace("T"," ").replace("Z","").split(".")[0].match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})(?::(\d{2}))?$/);if(!o)return console.warn("Format tanggal tidak cocok:",a),{date:"Tanggal tidak valid",time:"—"};const[s,p,N,W,je,Te,Ae]=o.map(Number),te=new Date(p,N-1,W,je,Te,Ae||0),$e=te.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Pe=te.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})+" WITA";return{date:$e,time:Pe}},xe=a=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",be=a=>({pending:"Menunggu",confirmed:"Dikonfirmasi",completed:"Selesai",cancelled:"Dibatalkan"})[a]||a,ke=()=>{$.value=null,v.value={patient_name:"",patient_phone:"",appointment_datetime:"",doctor:"",status:"pending",notes:""},V.value=!0},he=a=>{$.value=a,v.value={patient_name:a.nama,patient_phone:a.no_telp,appointment_datetime:a.tanggal,doctor:a.dokter?.nm_dokter||"",status:a.status,notes:a.catatan||""},V.value=!0},ye=async()=>{console.log("Saving booking:",v.value),J()},we=()=>{k.value={status:"",startDate:"",endDate:"",doctor:""}},_e=()=>{console.log("Applying filters:",k.value)},Be=()=>{n.value>1&&n.value--},Ne=()=>{n.value<q.value&&n.value++},Se=a=>{n.value=a},Mo=async()=>{z&&clearTimeout(z),L.value.length===16&&(z=setTimeout(async()=>{await ee()},500))},Ce=()=>{u.value?.nik&&(L.value=u.value.nik,u.value.nik.length===16&&ee())},ee=async()=>{if(!(!L.value||L.value.length!==16))try{Y.value=!0;const a=await fetch("/api/bpjs/check-nik",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({nik:L.value})}),t=await a.json();if(a.ok&&t.metaData&&t.metaData.code==="200"){const o=t.response?.peserta;if(o){let s=!1;o.tglLahir&&(l.value.tgl_lahir=o.tglLahir,s=!0),o.nama&&(l.value.nm_pasien=o.nama,s=!0),o.sex?(l.value.jk=o.sex==="L"?"L":"P",s=!0):o.jenisKelamin&&(l.value.jk=o.jenisKelamin==="Laki-laki"?"L":"P",s=!0),o.jenisPeserta&&o.jenisPeserta.keterangan&&(l.value.pekerjaan=o.jenisPeserta.keterangan,s=!0),o.nik&&(l.value.no_ktp=o.nik,s=!0),o.noKartu&&(l.value.no_peserta=o.noKartu,s=!0),o.alamat&&(l.value.alamat=o.alamat,s=!0),o.noHP&&(l.value.no_tlp=o.noHP,s=!0),s?T("Data peserta berhasil diambil dari BPJS dan form telah diisi otomatis","success"):T("Data peserta ditemukan di BPJS","info")}else T("Data peserta ditemukan tetapi informasi tidak lengkap","warning")}else t.metaData&&t.metaData.code==="201"?T(t.metaData.message||"Data peserta tidak ditemukan di BPJS","error"):T(t.metaData?.message||"Gagal mengambil data dari BPJS","error")}catch(a){console.error("Error fetching NIK data:",a),T("Terjadi kesalahan saat mengambil data BPJS","error")}finally{Y.value=!1}},Ve=()=>{u.value?.alamat&&(l.value.alamat=u.value.alamat)},Me=async a=>{if(R.value)return;if((await X("Terima Booking",`Apakah Anda yakin ingin menerima booking dari ${a.nama}?`)).isConfirmed)try{R.value=!0;const o=await fetch(`/api/bookings/${a.no_booking}/accept`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),s=await o.json();if(o.ok&&s.success){const p=b.value.data.findIndex(N=>N.no_booking===a.no_booking);p!==-1&&(b.value.data[p].status="Diterima"),await G("Booking Diterima!",void 0,`
            <div class="text-left">
              <p class="mb-3">Booking dari <strong>${a.nama}</strong> berhasil diterima.</p>
              <div class="bg-green-50 p-4 rounded-lg mb-4">
                <h4 class="font-semibold text-green-800 mb-2">Detail Booking:</h4>
                <p class="text-sm"><strong>No. Booking:</strong> ${a.no_booking}</p>
                <p class="text-sm"><strong>Nama:</strong> ${a.nama}</p>
                <p class="text-sm"><strong>Tanggal:</strong> ${new Date(a.tanggal).toLocaleDateString("id-ID")}</p>
                <p class="text-sm"><strong>Dokter:</strong> ${a.dokter?.nm_dokter||"N/A"}</p>
                <p class="text-sm"><strong>Poli:</strong> ${a.poliklinik?.nm_poli||"N/A"}</p>
              </div>
              <p class="mb-4 text-sm text-gray-600">Notifikasi telah dikirim ke pasien melalui WhatsApp.</p>
            </div>
          `)}else await j("Gagal Menerima Booking",s.message||"Terjadi kesalahan saat menerima booking")}catch(o){console.error("Error accepting booking:",o),await j("Kesalahan Sistem","Terjadi kesalahan saat menerima booking. Silakan coba lagi.")}finally{R.value=!1}},De=async a=>{if(B.value)return;if((await X("Daftarkan pasien ke PendaSIMRS",`Apakah Anda yakin ingin mentransfer booking ${a.nama} ke Reg Periksa?`)).isConfirmed)try{B.value=!0,console.log("Starting transfer for booking:",a.no_booking);const o=await fetch(`/api/reg-periksa/transfer/${a.no_booking}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});console.log("Raw response:",{status:o.status,statusText:o.statusText,ok:o.ok,headers:Object.fromEntries(o.headers.entries())});const s=o.headers.get("content-type");if(console.log("Content-Type:",s),!s||!s.includes("application/json")){const N=await o.text();throw console.error("Non-JSON response:",N),new Error("Server returned non-JSON response: "+N.substring(0,200))}const p=await o.json();if(console.log("Parsed JSON result:",p),console.log("Response conditions:",{"response.ok":o.ok,"result.success":p.success,combined:o.ok&&p.success}),o.ok&&p.success){console.log("Success condition met, showing success popup");const N=b.value.data.findIndex(W=>W.no_booking===a.no_booking);N!==-1&&(b.value.data[N].status="Terdaftar"),await G("Transfer Berhasil!",void 0,`
            <div class="text-left">
              <p class="mb-3">Booking <strong>${a.nama}</strong> berhasil ditransfer ke Reg Periksa.</p>
              <div class="bg-green-50 p-4 rounded-lg mb-4">
                <h4 class="font-semibold text-green-800 mb-2">Detail Registrasi SIMRS:</h4>
                <p class="text-sm"><strong>No. Rawat:</strong> ${p.data.no_rawat}</p>
                <p class="text-sm"><strong>No. Registrasi:</strong> ${p.data.no_reg}</p>
                <p class="text-sm"><strong>No. RM:</strong> ${p.data.no_rkm_medis}</p>
                <p class="text-sm"><strong>Pasien:</strong> ${p.data.nama_pasien}</p>
                <p class="text-sm"><strong>Tanggal:</strong> ${new Date(p.data.tgl_registrasi).toLocaleDateString("id-ID")}</p>
                <p class="text-sm"><strong>Poli:</strong> ${p.data.poli}</p>
                <p class="text-sm"><strong>Dokter:</strong> ${p.data.dokter}</p>
              </div>
              <p class="mb-4 text-sm text-gray-600">Pasien sudah terdaftar di SIMRS dan siap untuk pemeriksaan.</p>
            </div>
          `)}else console.log("Failure condition met, showing error popup"),console.error("Transfer failed:",{responseOk:o.ok,resultSuccess:p.success,result:p}),j("Transfer Gagal",p.message||"Terjadi kesalahan saat mentransfer booking")}catch(o){console.error("Error transferring booking:",o),j("Kesalahan Sistem","Terjadi kesalahan saat mentransfer booking. Silakan coba lagi.")}finally{B.value=!1}};return oe(()=>{document.addEventListener("click",M)}),Le(()=>{document.removeEventListener("click",M)}),(a,t)=>(y(),Ee(Ue,null,{default:ae(()=>[e("div",it,[e("div",dt,[t[31]||(t[31]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Manajemen Booking"),e("p",{class:"text-gray-600 mt-1"},"Kelola semua booking dan janji konsultasi pasien")],-1)),e("div",ut,[e("button",{onClick:t[0]||(t[0]=o=>C.value=!C.value),class:"bg-white border border-rose-200 text-rose-600 px-4 py-2 rounded-xl hover:bg-rose-50 transition-colors flex items-center"},[...t[29]||(t[29]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),S(" Filter ",-1)])]),e("button",{onClick:ke,class:"bg-gradient-to-r from-rose-500 to-pink-500 text-white px-6 py-2 rounded-xl hover:from-rose-600 hover:to-pink-600 transition-all shadow-lg flex items-center"},[...t[30]||(t[30]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),S(" Tambah Booking ",-1)])])])]),C.value?(y(),_("div",ct,[e("div",pt,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>k.value.status=o),class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[32]||(t[32]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"pending"},"Menunggu",-1),e("option",{value:"confirmed"},"Dikonfirmasi",-1),e("option",{value:"completed"},"Selesai",-1),e("option",{value:"cancelled"},"Dibatalkan",-1)])],512),[[E,k.value.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Mulai",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>k.value.startDate=o),type:"date",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,k.value.startDate]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Akhir",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>k.value.endDate=o),type:"date",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,k.value.endDate]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dokter",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>k.value.doctor=o),class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[36]||(t[36]=[e("option",{value:""},"Semua Dokter",-1),e("option",{value:"dr-bunga-sari"},"dr. Bunga Sari, Sp.KK",-1)])],512),[[E,k.value.doctor]])])]),e("div",{class:"flex justify-end mt-4 space-x-3"},[e("button",{onClick:we,class:"px-4 py-2 text-gray-600 hover:text-gray-800"},"Reset"),e("button",{onClick:_e,class:"bg-rose-500 text-white px-6 py-2 rounded-xl hover:bg-rose-600 transition-colors"},"Terapkan Filter")])])):x("",!0),e("div",mt,[e("div",gt,[e("div",ft,[t[39]||(t[39]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Daftar Booking",-1)),e("div",vt,[e("div",xt,[m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>P.value=o),type:"text",placeholder:"Cari nama pasien...",class:"pl-10 pr-4 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900 placeholder-gray-500"},null,512),[[w,P.value]]),t[38]||(t[38]=e("svg",{class:"w-4 h-4 text-gray-400 absolute left-3 top-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])])]),e("div",bt,[e("table",kt,[t[52]||(t[52]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No Rekam Medis"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pasien"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal & Waktu"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Dokter"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi & Kontak")])],-1)),e("tbody",ht,[(y(!0),_(re,null,ne(me.value,o=>(y(),_("tr",{key:o.no_booking,class:"hover:bg-gray-50"},[e("td",yt,[e("div",wt,[e("span",{class:F(o.pasien?.no_rkm_medis?"bg-green-300 text-black font-bold px-3 py-1 rounded-lg shadow-md":"bg-red-400 text-white font-bold px-3 py-1 rounded-lg shadow-md")},i(o.pasien?.no_rkm_medis||"Belum"),3)])]),e("td",_t,[e("div",Bt,[e("div",Nt,[e("div",St,i(o.nama),1),e("div",Ct,i(o.no_telp),1)])])]),e("td",Vt,[e("div",Mt,i(Z(o.tanggal).date),1),e("div",Dt,"Pukul "+i(Z(o.tanggal).time),1)]),e("td",jt,[e("div",Tt,i(o.dokter?.nm_dokter||"N/A"),1)]),e("td",At,[e("span",{class:F(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",xe(o.status)])},i(be(o.status)),3)]),e("td",$t,[e("div",Pt,[e("button",{onClick:H(s=>fe(o.no_booking),["stop"]),class:"group inline-flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-gray-50 to-gray-100 hover:from-rose-50 hover:to-pink-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 shadow-sm hover:shadow-md"},[(y(),_("svg",{class:F(["w-5 h-5 text-gray-600 group-hover:text-gray-800 rotate-icon",{rotated:I.value===o.no_booking}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[40]||(t[40]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"},null,-1)])],2))],8,It),se(Ke,{name:"dropdown",appear:""},{default:ae(()=>[m(e("div",{class:"absolute right-0 mt-3 w-80 bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-200/50 z-50 overflow-hidden",onClick:t[7]||(t[7]=H(()=>{},["stop"]))},[e("div",Lt,[e("div",Et,[e("div",Kt,[t[41]||(t[41]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-rose-100 to-pink-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("h3",Rt,i(o.nama),1),e("p",Ut,i(o.no_telp),1)])]),e("button",{onClick:t[6]||(t[6]=s=>M()),class:"p-1.5 rounded-full hover:bg-white/70 transition-all duration-200 group"},[...t[42]||(t[42]=[e("svg",{class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Ft,[e("div",Ht,[t[45]||(t[45]=e("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center"},[e("svg",{class:"w-3 h-3 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),S(" Kontak ")],-1)),e("div",zt,[e("a",{href:`tel:${o.no_telp}`,class:"action-button flex items-center px-4 py-3 rounded-xl text-sm text-gray-700 hover:bg-blue-50/80 hover:text-blue-700 color-transition group border border-transparent hover:border-blue-200/50"},[...t[43]||(t[43]=[e("div",{class:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center mr-3 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1),e("div",{class:"flex-1"},[e("span",{class:"font-medium"},"Telepon"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Hubungi langsung")],-1)])],8,Ot),e("a",{href:`https://wa.me/${o.no_telp.replace(/[^0-9]/g,"")}`,target:"_blank",class:"action-button flex items-center px-4 py-3 rounded-xl text-sm text-gray-700 hover:bg-green-50/80 hover:text-green-700 color-transition group border border-transparent hover:border-green-200/50"},[...t[44]||(t[44]=[e("div",{class:"w-9 h-9 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center mr-3 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-200"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.109"})])],-1),e("div",{class:"flex-1"},[e("span",{class:"font-medium"},"WhatsApp"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Kirim pesan")],-1)])],8,Jt)])]),t[51]||(t[51]=e("div",{class:"mx-5 my-4 border-t border-gray-200/60"},null,-1)),e("div",qt,[t[50]||(t[50]=e("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center"},[e("svg",{class:"w-3 h-3 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),S(" Aksi ")],-1)),e("div",Wt,[e("button",{onClick:s=>{he(o),M()},class:"action-button flex items-center w-full px-4 py-3 rounded-xl text-sm text-gray-700 hover:bg-amber-50/80 hover:text-amber-700 color-transition group border border-transparent hover:border-amber-200/50"},[...t[46]||(t[46]=[e("div",{class:"w-9 h-9 rounded-xl bg-gradient-to-br from-amber-100 to-amber-200 flex items-center justify-center mr-3 group-hover:from-amber-200 group-hover:to-amber-300 transition-all duration-200"},[e("svg",{class:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),e("div",{class:"flex-1 text-left"},[e("span",{class:"font-medium"},"Edit Booking"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Ubah detail booking")],-1)])],8,Yt),o.status==="Belum Dibalas"?(y(),_("button",{key:0,onClick:s=>{Me(o),M()},disabled:R.value,class:"action-button flex items-center w-full px-4 py-3 rounded-xl text-sm text-gray-700 hover:bg-green-50/80 hover:text-green-700 color-transition group disabled:opacity-50 disabled:cursor-not-allowed border border-transparent hover:border-green-200/50"},[...t[47]||(t[47]=[e("div",{class:"w-9 h-9 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center mr-3 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-200"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),e("div",{class:"flex-1 text-left"},[e("span",{class:"font-medium"},"Terima Booking"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Konfirmasi booking pasien")],-1)])],8,Gt)):x("",!0),e("button",{onClick:s=>{ue(o),M()},disabled:f.value,class:"action-button flex items-center w-full px-4 py-3 rounded-xl text-sm text-gray-700 hover:bg-purple-50/80 hover:text-purple-700 color-transition group disabled:opacity-50 disabled:cursor-not-allowed border border-transparent hover:border-purple-200/50"},[...t[48]||(t[48]=[e("div",{class:"w-9 h-9 rounded-xl bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center mr-3 group-hover:from-purple-200 group-hover:to-purple-300 transition-all duration-200"},[e("svg",{class:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})])],-1),e("div",{class:"flex-1 text-left"},[e("span",{class:"font-medium"},"Daftarkan ke SIMRS"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Registrasi pasien ke sistem")],-1)])],8,Xt),e("button",{onClick:s=>{De(o),M()},disabled:B.value||o.status!=="Diterima",class:"action-button flex items-center w-full px-4 py-3 rounded-xl text-sm text-gray-700 hover:bg-indigo-50/80 hover:text-indigo-700 color-transition group disabled:opacity-50 disabled:cursor-not-allowed border border-transparent hover:border-indigo-200/50"},[...t[49]||(t[49]=[e("div",{class:"w-9 h-9 rounded-xl bg-gradient-to-br from-indigo-100 to-indigo-200 flex items-center justify-center mr-3 group-hover:from-indigo-200 group-hover:to-indigo-300 transition-all duration-200"},[e("svg",{class:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})])],-1),e("div",{class:"flex-1 text-left"},[e("span",{class:"font-medium"},"Transfer ke Reg Periksa"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Pindah ke registrasi periksa")],-1)])],8,Qt)])])])],512),[[Re,I.value===o.no_booking]])]),_:2},1024)])])]))),128))])])]),e("div",Zt,[e("div",eo,[e("div",to," Menampilkan "+i((n.value-1)*c.value+1)+" - "+i(Math.min(n.value*c.value,Q.value))+" dari "+i(Q.value)+" booking ",1),e("div",oo,[e("button",{onClick:Be,disabled:n.value===1,class:"px-3 py-1 border border-rose-200 rounded-lg text-sm text-gray-600 hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Sebelumnya ",8,ao),(y(!0),_(re,null,ne(ge.value,o=>(y(),_("button",{key:o,onClick:s=>Se(o),class:F(["px-3 py-1 border rounded-lg text-sm",o===n.value?"bg-rose-500 text-white border-rose-500":"border-rose-200 text-gray-600 hover:bg-rose-50"])},i(o),11,so))),128)),e("button",{onClick:Ne,disabled:n.value===q.value,class:"px-3 py-1 border border-rose-200 rounded-lg text-sm text-gray-600 hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Selanjutnya ",8,ro)])])])]),V.value?(y(),_("div",no,[e("div",lo,[e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:J}),e("div",io,[e("h3",uo,i($.value?"Edit Booking":"Tambah Booking Baru"),1),e("form",{onSubmit:H(ye,["prevent"]),class:"space-y-4"},[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Pasien",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>v.value.patient_name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,v.value.patient_name]])]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nomor Telepon",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>v.value.patient_phone=o),type:"tel",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,v.value.patient_phone]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal & Waktu Janji",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>v.value.appointment_datetime=o),type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,v.value.appointment_datetime]])]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dokter",-1)),m(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>v.value.doctor=o),required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[56]||(t[56]=[e("option",{value:""},"Pilih Dokter",-1),e("option",{value:"dr. Bunga Sari, Sp.KK"},"dr. Bunga Sari, Sp.KK",-1)])],512),[[E,v.value.doctor]])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>v.value.status=o),required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[58]||(t[58]=[e("option",{value:"pending"},"Menunggu",-1),e("option",{value:"confirmed"},"Dikonfirmasi",-1),e("option",{value:"completed"},"Selesai",-1),e("option",{value:"cancelled"},"Dibatalkan",-1)])],512),[[E,v.value.status]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catatan",-1)),m(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=o=>v.value.notes=o),rows:"3",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,v.value.notes]])]),e("div",co,[e("button",{type:"button",onClick:J,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Batal "),e("button",po,i($.value?"Update":"Simpan"),1)])],32)])])])):x("",!0),A.value?(y(),_("div",mo,[e("div",go,[e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:O}),e("div",fo,[t[90]||(t[90]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-rose-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]),S(" Daftarkan Pasien ke SIMRS ")],-1)),e("div",vo,[t[65]||(t[65]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Data Booking",-1)),e("div",xo,[e("div",null,[t[61]||(t[61]=e("span",{class:"text-gray-900"},"No. Booking:",-1)),e("span",bo,i(u.value?.no_booking),1)]),e("div",null,[t[62]||(t[62]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("span",ko,i(u.value?.nama),1)]),e("div",null,[t[63]||(t[63]=e("span",{class:"text-gray-600"},"NIK:",-1)),e("span",ho,i(u.value?.nik),1)]),e("div",null,[t[64]||(t[64]=e("span",{class:"text-gray-600"},"No. Telp:",-1)),e("span",yo,i(u.value?.no_telp),1)])])]),e("form",{onSubmit:H(pe,["prevent"]),class:"space-y-4"},[x("",!0),e("div",wo,[e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Lengkap *",-1)),m(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>l.value.nm_pasien=o),type:"text",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,l.value.nm_pasien]])]),x("",!0),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Lahir",-1)),m(e("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>l.value.tgl_lahir=o),type:"date",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,l.value.tgl_lahir]])]),e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jenis Kelamin",-1)),m(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>l.value.jk=o),class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[72]||(t[72]=[e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)])],512),[[E,l.value.jk]])]),x("",!0),x("",!0),e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pekerjaan",-1)),m(e("input",{"onUpdate:modelValue":t[21]||(t[21]=o=>l.value.pekerjaan=o),type:"text",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,l.value.pekerjaan]])]),x("",!0),x("",!0),x("",!0)]),e("div",null,[t[84]||(t[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alamat Lengkap",-1)),m(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=o=>l.value.alamat=o),rows:"3",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[w,l.value.alamat]])]),x("",!0),e("div",_o,[e("button",{type:"button",onClick:O,class:"px-6 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors"}," Batal "),e("button",{type:"submit",disabled:f.value,class:"bg-gradient-to-r from-rose-500 to-pink-500 text-white px-6 py-2 rounded-xl hover:from-rose-600 hover:to-pink-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[f.value?(y(),_("svg",No,[...t[89]||(t[89]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),S(" "+i(f.value?"Mendaftarkan...":"Daftarkan ke SIMRS"),1)],8,Bo)])],32)])])])):x("",!0)]),se(lt,{"is-visible":r.value,"patient-data":K.value,onOk:ce,onClose:t[28]||(t[28]=o=>r.value=!1)},null,8,["is-visible","patient-data"])]),_:1}))}}),$o=ie(So,[["__scopeId","data-v-454e1bfb"]]);export{$o as default};

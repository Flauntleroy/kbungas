import{d as c,r as d,g as k,c as i,b as e,a as v,e as b,f as n,t as l,C as y,o as r}from"./app-DnQTBHZy.js";const w={class:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center p-4"},h={class:"max-w-md w-full"},B={key:0,class:"bg-white rounded-2xl shadow-xl p-8 text-center"},j={key:1,class:"bg-white rounded-2xl shadow-xl p-8 text-center"},C={class:"bg-gray-50 rounded-lg p-4 mb-6 text-left"},T={class:"space-y-1 text-sm text-gray-600"},M={key:2,class:"bg-white rounded-2xl shadow-xl p-8 text-center"},D={class:"text-gray-600 mb-4"},N={key:3,class:"bg-white rounded-2xl shadow-xl p-8 text-center"},S={class:"bg-gray-50 rounded-lg p-4 mb-6 text-left"},_={class:"text-sm text-gray-600"},P=c({__name:"BookingConfirmation",props:{token:{}},setup(f){const p=f,u=d(!0),o=d("loading"),m=d(""),a=d(null),x=async()=>{try{u.value=!0;const s=await y.post(`/api/booking/confirm/${p.token}`);s.data.success?(o.value="success",a.value=s.data.data):(o.value="error",m.value=s.data.message||"Terjadi kesalahan saat mengonfirmasi booking")}catch(s){s.response?.status===422&&s.response?.data?.message?.includes("sudah dikonfirmasi")?(o.value="already_confirmed",a.value=s.response.data):(o.value="error",m.value=s.response?.data?.message||"Terjadi kesalahan saat mengonfirmasi booking")}finally{u.value=!1}},g=()=>{window.history.length>1?window.history.back():window.location.href="/"};return k(()=>{x()}),(s,t)=>(r(),i("div",w,[e("div",h,[u.value?(r(),i("div",B,[...t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),e("h2",{class:"text-xl font-semibold text-gray-800 mb-2"},"Memproses Konfirmasi",-1),e("p",{class:"text-gray-600"},"Mohon tunggu sebentar...",-1)])])):o.value==="success"?(r(),i("div",j,[t[6]||(t[6]=b('<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h1 class="text-2xl font-bold text-green-600 mb-2">‚úÖ Booking Dikonfirmasi!</h1><p class="text-gray-600 mb-6">Booking berhasil dikonfirmasi. Pasien akan mendapat notifikasi otomatis.</p>',3)),e("div",C,[t[5]||(t[5]=e("h3",{class:"font-semibold text-gray-800 mb-2"},"Detail Booking:",-1)),e("div",T,[e("p",null,[t[1]||(t[1]=e("span",{class:"font-medium"},"No. Booking:",-1)),n(" "+l(a.value?.no_booking),1)]),e("p",null,[t[2]||(t[2]=e("span",{class:"font-medium"},"Nama Pasien:",-1)),n(" "+l(a.value?.patient_name),1)]),e("p",null,[t[3]||(t[3]=e("span",{class:"font-medium"},"Tanggal:",-1)),n(" "+l(a.value?.appointment_date),1)]),e("p",null,[t[4]||(t[4]=e("span",{class:"font-medium"},"Dikonfirmasi:",-1)),n(" "+l(a.value?.confirmed_at),1)])])]),t[7]||(t[7]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},[e("p",{class:"text-blue-800 text-sm"},[e("strong",null,"üì± Notifikasi Terkirim:"),n(" Pasien telah menerima notifikasi konfirmasi melalui WhatsApp. ")])],-1)),e("button",{onClick:g,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors"}," Tutup Halaman ")])):o.value==="error"?(r(),i("div",M,[t[8]||(t[8]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t[9]||(t[9]=e("h1",{class:"text-2xl font-bold text-red-600 mb-2"},"‚ùå Konfirmasi Gagal",-1)),e("p",D,l(m.value),1),t[10]||(t[10]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-left"},[e("h3",{class:"font-semibold text-yellow-800 mb-2"},"Kemungkinan Penyebab:"),e("ul",{class:"text-sm text-yellow-700 space-y-1"},[e("li",null,"‚Ä¢ Link konfirmasi sudah kedaluwarsa (lebih dari 24 jam)"),e("li",null,"‚Ä¢ Booking sudah dikonfirmasi sebelumnya"),e("li",null,"‚Ä¢ Token konfirmasi tidak valid"),e("li",null,"‚Ä¢ Anda tidak memiliki akses untuk booking ini")])],-1)),e("button",{onClick:g,class:"w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors"}," Tutup Halaman ")])):o.value==="already_confirmed"?(r(),i("div",N,[t[13]||(t[13]=b('<div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><h1 class="text-2xl font-bold text-yellow-600 mb-2">‚ö†Ô∏è Sudah Dikonfirmasi</h1><p class="text-gray-600 mb-4">Booking ini sudah dikonfirmasi sebelumnya.</p>',3)),e("div",S,[t[12]||(t[12]=e("h3",{class:"font-semibold text-gray-800 mb-2"},"Status Saat Ini:",-1)),e("p",_,[t[11]||(t[11]=e("span",{class:"font-medium"},"Status:",-1)),n(" "+l(a.value?.current_status||"Sudah Dikonfirmasi"),1)])]),e("button",{onClick:g,class:"w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors"}," Tutup Halaman ")])):v("",!0)])]))}});export{P as default};

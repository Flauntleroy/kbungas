import{d as J,r as m,h as y,j as O,w as W,b as e,c as u,a as w,f as A,o as i,l as p,v as k,m as x,F as U,n as P,t as a,p as h,q as X,x as _}from"./app-DnQTBHZy.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C5LkTz5F.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4"},te={class:"mt-4 sm:mt-0 flex space-x-3"},se={key:0,class:"bg-white rounded-2xl p-6 shadow-sm border border-rose-100 mb-6"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},re={class:"bg-white rounded-2xl shadow-sm border border-rose-100 overflow-hidden"},ae={class:"px-6 py-4 border-b border-rose-100"},le={class:"flex items-center justify-between"},ne={class:"flex items-center space-x-4"},ie={class:"relative"},de={class:"overflow-x-auto"},ue={class:"w-full"},pe={class:"bg-white divide-y divide-gray-200"},ce={class:"px-6 py-4 whitespace-nowrap"},me={class:"flex items-center"},xe={class:"w-10 h-10 bg-gradient-to-r from-rose-500 to-pink-500 rounded-full flex items-center justify-center"},ve={class:"text-white text-sm font-semibold"},fe={class:"ml-4"},ge={class:"text-sm font-medium text-gray-900"},be={class:"text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap"},we={class:"px-6 py-4 whitespace-nowrap"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ce={class:"flex space-x-2"},Se=["onClick"],Me=["onClick"],je={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ae={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ue=["onClick"],Pe={class:"px-6 py-4 border-t border-rose-100"},Be={class:"flex items-center justify-between"},Ve={class:"text-sm text-gray-500"},De={class:"flex space-x-2"},Te=["disabled"],Le=["onClick"],$e=["disabled"],Fe={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},qe={class:"flex items-center justify-center min-h-screen px-4"},Ee={class:"bg-white rounded-2xl p-6 w-full max-w-md relative"},Re={class:"text-lg font-semibold text-gray-900 mb-4"},ze={key:0},He={key:1},Ie={class:"flex justify-end space-x-3 pt-4"},Ne={type:"submit",class:"bg-gradient-to-r from-rose-500 to-pink-500 text-white px-6 py-2 rounded-xl hover:from-rose-600 hover:to-pink-600 transition-all"},Ke=J({__name:"Users",props:{users:{}},setup(B){const V=B,f=m(!1),g=m(!1),d=m(null),v=m(""),l=m(1),C=m(10),n=m({role:"",status:"",joinDate:""}),r=m({name:"",email:"",password:"",password_confirmation:"",role:"",status:"active"}),j=y(()=>{let o=V.users;return v.value&&(o=o.filter(t=>t.name.toLowerCase().includes(v.value.toLowerCase())||t.email.toLowerCase().includes(v.value.toLowerCase()))),n.value.role&&(o=o.filter(t=>t.role===n.value.role)),n.value.status&&(o=o.filter(t=>t.status===n.value.status)),o}),S=y(()=>j.value.length),M=y(()=>Math.ceil(S.value/C.value)),D=y(()=>{const o=[],t=Math.max(1,l.value-2),s=Math.min(M.value,l.value+2);for(let c=t;c<=s;c++)o.push(c);return o}),T=o=>new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),L=o=>new Date(o).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=o=>({super_admin:"Super Admin",admin:"Admin",staff:"Staff"})[o]||o,F=o=>({active:"Aktif",inactive:"Tidak Aktif",suspended:"Suspended"})[o]||o,q=()=>{d.value=null,r.value={name:"",email:"",password:"",password_confirmation:"",role:"",status:"active"},g.value=!0},E=o=>{d.value=o,r.value={name:o.name,email:o.email,password:"",password_confirmation:"",role:o.role,status:o.status},g.value=!0},b=()=>{g.value=!1,d.value=null},R=()=>{if(!d.value&&r.value.password!==r.value.password_confirmation){alert("Password dan konfirmasi password tidak sama!");return}d.value?_.put(`/admin/users/${d.value.id}`,r.value,{onSuccess:()=>{b()},onError:o=>{console.error("Update user error:",o)}}):_.post("/admin/users",r.value,{onSuccess:()=>{b()},onError:o=>{console.error("Create user error:",o)}})},z=o=>{const s=(o.status==="active"?"inactive":"active")==="active"?"mengaktifkan":"menonaktifkan";confirm(`Apakah Anda yakin ingin ${s} pengguna ini?`)&&_.patch(`/admin/users/${o.id}/toggle-status`,{},{onError:c=>{console.error("Toggle status error:",c)}})},H=o=>{confirm("Apakah Anda yakin ingin menghapus pengguna ini?")&&_.delete(`/admin/users/${o.id}`,{onError:t=>{console.error("Delete user error:",t)}})},I=()=>{n.value={role:"",status:"",joinDate:""}},N=()=>{f.value=!1},K=()=>{l.value>1&&l.value--},Q=()=>{l.value<M.value&&l.value++},G=o=>{l.value=o};return(o,t)=>(i(),O(Y,null,{default:W(()=>[e("div",ee,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Manajemen Pengguna"),e("p",{class:"text-gray-600 mt-1"},"Kelola akun admin dan pengguna sistem")],-1)),e("div",te,[e("button",{onClick:t[0]||(t[0]=s=>f.value=!f.value),class:"bg-white border border-rose-200 text-rose-600 px-4 py-2 rounded-xl hover:bg-rose-50 transition-colors flex items-center"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),A(" Filter ",-1)])]),e("button",{onClick:q,class:"bg-gradient-to-r from-rose-500 to-pink-500 text-white px-6 py-2 rounded-xl hover:from-rose-600 hover:to-pink-600 transition-all shadow-lg flex items-center"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),A(" Tambah Pengguna ",-1)])])])]),f.value?(i(),u("div",se,[e("div",oe,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.role=s),class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[14]||(t[14]=[e("option",{value:""},"Semua Role",-1),e("option",{value:"super_admin"},"Super Admin",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"staff"},"Staff",-1)])],512),[[k,n.value.role]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.status=s),class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[16]||(t[16]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Tidak Aktif",-1),e("option",{value:"suspended"},"Suspended",-1)])],512),[[k,n.value.status]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Bergabung",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.joinDate=s),type:"date",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[x,n.value.joinDate]])])]),e("div",{class:"flex justify-end mt-4 space-x-3"},[e("button",{onClick:I,class:"px-4 py-2 text-gray-600 hover:text-gray-800"},"Reset"),e("button",{onClick:N,class:"bg-rose-500 text-white px-6 py-2 rounded-xl hover:bg-rose-600 transition-colors"},"Terapkan Filter")])])):w("",!0),e("div",re,[e("div",ae,[e("div",le,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Daftar Pengguna",-1)),e("div",ne,[e("div",ie,[p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>v.value=s),type:"text",placeholder:"Cari nama atau email...",class:"pl-10 pr-4 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900 placeholder-gray-500"},null,512),[[x,v.value]]),t[19]||(t[19]=e("svg",{class:"w-4 h-4 text-gray-400 absolute left-3 top-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])])]),e("div",de,[e("table",ue,[t[25]||(t[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pengguna"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Bergabung"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Login Terakhir"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",pe,[(i(!0),u(U,null,P(j.value,s=>(i(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ce,[e("div",me,[e("div",xe,[e("span",ve,a(s.name.charAt(0)),1)]),e("div",fe,[e("div",ge,a(s.name),1),e("div",be,a(s.email),1)])])]),e("td",ye,[e("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.role==="super_admin"?"bg-purple-100 text-purple-800":s.role==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},a($(s.role)),3)]),e("td",we,[e("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.status==="active"?"bg-green-100 text-green-800":s.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"])},a(F(s.status)),3)]),e("td",ke,a(T(s.created_at)),1),e("td",he,a(s.last_login?L(s.last_login):"Belum pernah"),1),e("td",_e,[e("div",Ce,[e("button",{onClick:c=>E(s),class:"text-rose-600 hover:text-rose-800"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Se),e("button",{onClick:c=>z(s),class:h(s.status==="active"?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800")},[s.status==="active"?(i(),u("svg",je,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"},null,-1)])])):(i(),u("svg",Ae,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],10,Me),e("button",{onClick:c=>H(s),class:"text-red-600 hover:text-red-800"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ue)])])]))),128))])])]),e("div",Pe,[e("div",Be,[e("div",Ve," Menampilkan "+a((l.value-1)*C.value+1)+" - "+a(Math.min(l.value*C.value,S.value))+" dari "+a(S.value)+" pengguna ",1),e("div",De,[e("button",{onClick:K,disabled:l.value===1,class:"px-3 py-1 border border-rose-200 rounded-lg text-sm text-gray-600 hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Sebelumnya ",8,Te),(i(!0),u(U,null,P(D.value,s=>(i(),u("button",{key:s,onClick:c=>G(s),class:h(["px-3 py-1 border rounded-lg text-sm",s===l.value?"bg-rose-500 text-white border-rose-500":"border-rose-200 text-gray-600 hover:bg-rose-50"])},a(s),11,Le))),128)),e("button",{onClick:Q,disabled:l.value===M.value,class:"px-3 py-1 border border-rose-200 rounded-lg text-sm text-gray-600 hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Selanjutnya ",8,$e)])])])]),g.value?(i(),u("div",Fe,[e("div",qe,[e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:b}),e("div",Ee,[e("h3",Re,a(d.value?"Edit Pengguna":"Tambah Pengguna Baru"),1),e("form",{onSubmit:X(R,["prevent"]),class:"space-y-4"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Lengkap",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[x,r.value.name]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.email=s),type:"email",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[x,r.value.email]])]),d.value?w("",!0):(i(),u("div",ze,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Password",-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.password=s),type:"password",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[x,r.value.password]])])),d.value?w("",!0):(i(),u("div",He,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Konfirmasi Password",-1)),p(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r.value.password_confirmation=s),type:"password",required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},null,512),[[x,r.value.password_confirmation]])])),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),p(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>r.value.role=s),required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[30]||(t[30]=[e("option",{value:""},"Pilih Role",-1),e("option",{value:"super_admin"},"Super Admin",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"staff"},"Staff",-1)])],512),[[k,r.value.role]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),p(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.status=s),required:"",class:"w-full px-3 py-2 border border-rose-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent text-gray-900"},[...t[32]||(t[32]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Tidak Aktif",-1),e("option",{value:"suspended"},"Suspended",-1)])],512),[[k,r.value.status]])]),e("div",Ie,[e("button",{type:"button",onClick:b,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Batal "),e("button",Ne,a(d.value?"Update":"Simpan"),1)])],32)])])])):w("",!0)]),_:1}))}}),Oe=Z(Ke,[["__scopeId","data-v-9af0e922"]]);export{Oe as default};
